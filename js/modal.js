const modalBlock=document.querySelector(".modal-block"),buttons=document.querySelectorAll("[data-modal]"),star=document.querySelector("span.star"),helpWindow=document.querySelector(".help-window"),sumitButton=document.querySelector("#order-button"),telField=document.querySelector("#tel"),requiredField=document.querySelector("[data-field=required]"),typeOrder=document.querySelector("[data-order=type-order]"),chooseType=document.querySelector("#choose-type"),chooseTypeLabel=document.querySelector("[for=choose-type]"),crossButtons=document.querySelectorAll("a.cross");let fHelp=distributorHelpWindow();function checkTelField(){[8,46,48,49,50,51,52,53,54,55,56,57].includes(event.keyCode)||event.preventDefault()}function checkFields(e){"+7"==telField.value||""==telField.value||12!==telField.value.length?(e.preventDefault(),telField.focus(),requiredField.classList.remove("hide")):(document.querySelector(".modal-window").classList.add("hide"),document.querySelector(".thanks-block").classList.remove("hide"))}function toggleModal(e){modalBlock.classList.toggle("hide"),document.querySelector("html").classList.toggle("ohidden"),document.querySelector("body").classList.toggle("margin-modal");let t=e.target.dataset.modal;chooseTypeLabel.classList.add("hide"),chooseType.classList.add("hide"),"header"!=t&&"map"!=t||(chooseTypeLabel.classList.remove("hide"),chooseType.classList.remove("hide")),e.target.dataset.modal&&addTypeOrder(t),requiredField.classList.add("hide"),telField.value="+7",document.querySelector(".modal-window").classList.remove("hide"),document.querySelector(".thanks-block").classList.add("hide")}function addTypeOrder(e){switch(e){case"header":case"map":typeOrder.innerHTML="Заявка на сбор вторсырья";break;case"paper":typeOrder.innerHTML="Заявка: макулатура";break;case"bottle":typeOrder.innerHTML="Заявка: ПЭТ бутылки";break;case"can":typeOrder.innerHTML="Заявка: алюминиевая банка";break;case"film":typeOrder.innerHTML="Заявка: пленка"}}function addHelpWindow(e){helpWindow.style.top=`${e.pageY+20}px`,helpWindow.style.left=`${e.pageX+10}px`,helpWindow.classList.toggle("hide")}function distributorHelpWindow(){let e,t=!1;return function(o){t?(clearTimeout(e),helpWindow.classList.add("hide"),t=!1):(t=!0,e=setTimeout(addHelpWindow.bind(this,o),1e3))}}buttons.forEach(e=>{e.addEventListener("click",toggleModal)}),document.querySelector(".modal-block").addEventListener("click",toggleModal),crossButtons.forEach(e=>{e.addEventListener("click",toggleModal)}),document.querySelector(".thanks-button").addEventListener("click",toggleModal),document.querySelector(".modal-window").addEventListener("click",()=>event.stopPropagation()),document.querySelector("a.cross").addEventListener("click",()=>event.stopPropagation()),typeOrder.addEventListener("click",()=>event.stopPropagation()),document.querySelector(".thanks-block").addEventListener("click",()=>event.stopPropagation()),star.addEventListener("mouseenter",fHelp),star.addEventListener("mouseleave",fHelp),sumitButton.addEventListener("click",checkFields),telField.addEventListener("keydown",checkTelField);